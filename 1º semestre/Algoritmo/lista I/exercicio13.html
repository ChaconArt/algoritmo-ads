<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercício 13</title>
</head>

<body>

    <h2>Campanha do time</h2>

    <select id="resultado">
        <option value="padrao">Indique o resultado</option>
        <option value="vitoria">Vitória</option>
        <option value="empate">Empate</option>
        <option value="derrota">Derrota</option>
    </select>

    <button onclick="registrar()">Registrar jogo</button> <br>

    <input id="pesquisa" type="number" placeholder="Indique qual jogo quer saber o resultado">
    <button onclick="buscar()">Buscar</button>

    <div id="msg"></div>
    <div id="msg2"></div>

</body>

</html>
<script>

    var desempenho = [];
    var vitoria = 0;
    var empate = 0;
    var derrota = 0;
    var pontuacao = 0;
    var pontos_disputados = 0;
    var aproveitamento = 0;

    function registrar() {

        if (resultado.value == 'padrao') {
            alert('Selecione qual foi o resultado da partida!')
        }

        else {
            desempenho.push(resultado.value)
            contar()
        }

        resultado.value = 'padrao'

    }

    function contar() {

        esvaziar()

        for (contador = 0; contador < desempenho.length; contador++) {

            if (desempenho[contador] == 'vitoria') {
                vitoria++

                pontuacao++
                pontuacao++
                pontuacao++
            }

            else if (desempenho[contador] == 'empate') {
                empate++
                pontuacao++
            }

            else if (desempenho[contador] == `derrota`) {
                derrota++
            }

        }


        pontos_disputados = desempenho.length * 3;
        aproveitamento = (pontuacao / pontos_disputados) * 100;

        msg.innerHTML = `
        O time teve: ${vitoria} vitórias, ${empate} empates, ${derrota} derrotas <br>
        Pontuação: ${pontuacao} <br>
        Aproveitamento: ${aproveitamento.toFixed(2)}
        `

    }

    function esvaziar() {

        vitoria = 0;
        empate = 0;
        derrota = 0;
        pontuacao = 0;

    }

    function buscar() {

        if (pesquisa.value > desempenho.length) {
            alert('Não foi cadastrado um ' + pesquisa.value + 'º jogo')
            pesquisa.value = ''
        }

        else if (pesquisa.value < 0) {
            alert('Não foi cadastrado um ' + pesquisa.value + 'º jogo')
            pesquisa.value = ''
        }

        else {

            var oqueaconteceu = ''

            if (desempenho[pesquisa.value - 1] == 'vitoria') {
                oqueaconteceu = 'ganhou'
            }

            else if (desempenho[pesquisa.value - 1] == 'empate') {
                oqueaconteceu = 'empatou'
            }

            else {
                oqueaconteceu = 'perdeu'
            }

            msg2.innerHTML = `
            No ${pesquisa.value}º jogo, o time ${oqueaconteceu}
            `

            pesquisa.value = ''

        }

    }




</script>